{% extends "base.html"%}
{% block title %} áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ”áƒ‘áƒ˜ {% endblock %}
{% block container %}
<div class="container-md bg-white mt-4 border rounded shadow-lg">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">âš™ï¸ áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ”áƒ‘áƒ˜</h2>
            
            <!-- Profile Information -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">ğŸ‘¤ áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜áƒ¡ áƒ˜áƒœáƒ¤áƒáƒ áƒ›áƒáƒªáƒ˜áƒ</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 text-center">
                            <img src="/static/images/{{ current_user.profile_img }}" alt="{{ current_user.name }}" class="rounded-circle" style="width: 120px; height: 120px; object-fit: cover;">
                            <h6 class="mt-2">{{ current_user.name }}</h6>
                            <small class="text-muted">{{ current_user.role }}</small>
                        </div>
                        <div class="col-md-9">
                            <p><strong>áƒ”áƒš.áƒ¤áƒáƒ¡áƒ¢áƒ:</strong> {{ current_user.email }}</p>
                            <p><strong>áƒ¢áƒ”áƒšáƒ”áƒ¤áƒáƒœáƒ˜:</strong> {{ current_user.phone_number }}</p>
                            <p><strong>áƒ£áƒœáƒ˜áƒ•áƒ”áƒ áƒ¡áƒ˜áƒ¢áƒ”áƒ¢áƒ˜:</strong> {{ current_user.university or "áƒ›áƒ˜áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ" }}</p>
                            <p><strong>áƒ¤áƒáƒ™áƒ£áƒšáƒ¢áƒ”áƒ¢áƒ˜:</strong> {{ current_user.faculty or "áƒ›áƒ˜áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ" }}</p>
                            <p><strong>áƒ©áƒ”áƒ›áƒ¡ áƒ¨áƒ”áƒ¡áƒáƒ®áƒ”áƒ‘:</strong> {{ current_user.text or "áƒ˜áƒœáƒ¤áƒáƒ áƒ›áƒáƒªáƒ˜áƒ áƒáƒ  áƒáƒ áƒ˜áƒ¡" }}</p>
                            <a href="/account" class="btn btn-primary btn-sm">áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜áƒ¡ áƒ áƒ”áƒ“áƒáƒ¥áƒ¢áƒ˜áƒ áƒ”áƒ‘áƒ</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Friend Requests -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">ğŸ‘‹ áƒ›áƒ”áƒ’áƒáƒ‘áƒ áƒáƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ”áƒ‘áƒ˜</h5>
                </div>
                <div class="card-body">
                    {% if received_requests %}
                        {% for request in received_requests %}
                        <div class="d-flex align-items-center justify-content-between mb-3 p-2 border rounded">
                            <div class="d-flex align-items-center">
                                <img src="/static/images/{{ request.requester.profile_img }}" alt="{{ request.requester.name }}" class="rounded-circle me-3" style="width: 40px; height: 40px; object-fit: cover;">
                                <div>
                                    <h6 class="mb-0">{{ request.requester.name }}</h6>
                                    <small class="text-muted">{{ request.created_at.strftime('%d %b %Y') }}</small>
                                </div>
                            </div>
                            <div>
                                <a href="/respond_friend_request/{{ request.id }}/accept" class="btn btn-success btn-sm">âœ“ áƒ“áƒáƒ“áƒáƒ¡áƒ¢áƒ£áƒ áƒ”áƒ‘áƒ</a>
                                <a href="/respond_friend_request/{{ request.id }}/reject" class="btn btn-outline-danger btn-sm">âœ— áƒ£áƒáƒ áƒ§áƒáƒ¤áƒ</a>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted">áƒáƒ®áƒáƒšáƒ˜ áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡</p>
                    {% endif %}
                </div>
            </div>
            
            <!-- Friends List -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">ğŸ‘¥ áƒ›áƒ”áƒ’áƒáƒ‘áƒ áƒ”áƒ‘áƒ˜</h5>
                </div>
                <div class="card-body">
                    {% if friends %}
                        <div class="row">
                            {% for friend in friends %}
                            <div class="col-md-4 mb-3">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <img src="/static/images/{{ friend.profile_img }}" alt="{{ friend.name }}" class="rounded-circle mb-2" style="width: 60px; height: 60px; object-fit: cover;">
                                        <h6 class="card-title">{{ friend.name }}</h6>
                                        <a href="/profile/{{ friend.id }}" class="btn btn-outline-primary btn-sm">áƒáƒ áƒáƒ¤áƒ˜áƒšáƒ˜áƒ¡ áƒœáƒáƒ®áƒ•áƒ</a>
                                        <a href="/chat/{{ friend.id }}" class="btn btn-outline-success btn-sm">áƒ¨áƒ”áƒ¢áƒ§áƒáƒ‘áƒ˜áƒœáƒ”áƒ‘áƒ</a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-muted">áƒ¯áƒ”áƒ  áƒ›áƒ”áƒ’áƒáƒ‘áƒ áƒ”áƒ‘áƒ˜ áƒáƒ  áƒ’áƒ§áƒáƒ•áƒ—</p>
                    {% endif %}
                </div>
            </div>
            
            <!-- My Posts -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">ğŸ“ áƒ©áƒ”áƒ›áƒ˜ áƒáƒáƒ¡áƒ¢áƒ”áƒ‘áƒ˜</h5>
                </div>
                <div class="card-body">
                    {% if user_posts %}
                        {% for post in user_posts %}
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <p class="card-text">{{ post.content }}</p>
                                        <small class="text-muted">{{ post.created_at.strftime('%d %b %Y, %H:%M') }}</small>
                                        {% if post.updated_at != post.created_at %}
                                        <small class="text-muted">â€¢ áƒ’áƒáƒœáƒáƒ®áƒšáƒ“áƒ</small>
                                        {% endif %}
                                    </div>
                                    <div class="ms-3">
                                        <a href="/edit_post/{{ post.id }}" class="btn btn-sm btn-outline-primary">áƒ áƒ”áƒ“áƒáƒ¥áƒ¢áƒ˜áƒ áƒ”áƒ‘áƒ</a>
                                        <a href="/delete_post/{{ post.id }}" class="btn btn-sm btn-outline-danger">áƒ¬áƒáƒ¨áƒšáƒ</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p class="text-muted">áƒ¯áƒ”áƒ  áƒáƒáƒ¡áƒ¢áƒ”áƒ‘áƒ˜ áƒáƒ  áƒ’áƒáƒ’áƒ˜áƒ–áƒ˜áƒáƒ áƒ”áƒ‘áƒ˜áƒáƒ—</p>
                        <a href="/create_post" class="btn btn-primary">áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒáƒáƒ¡áƒ¢áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
